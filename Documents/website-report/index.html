<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta charset="UTF-8" name="theme-color" content="#1565c0">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link href="css/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection" />
    <link href="css/font-awesome.min.css" type="text/css" rel="stylesheet" media="screen,projection" />
    <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection" />
    <link rel="icon" href="img/icon.png" />
    <link rel="apple-touch-icon" href="img/icon.png" />
    <link href='https://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Squada+One' rel='stylesheet' type='text/css'>
    <title>FRIDGES</title>
</head>
<header>
    <div class="navbar">
        <nav class="blue darken-2">
            <a data-activates="mobile" class="button-collapse hide-on-med-and-up"><i class="mdi-navigation-menu right"></i></a>
            <div class="nav-wrapper container">
                <ul class="hide-on-med-and-down left">
                    <li>
                        <a></a>
                    </li>
                </ul>
                <a class="brand-logo center">
                    <span class="logo large">FRIDGES</span>
                </a>
                <ul class="side-nav" id="mobile">
                    <li class="blue-text text-darken-2">Table of Contents</li>
                    <li><a href="#introduction">Introduction</a>
                    </li>
                    <li><a href="#about">- About</a>
                    </li>
                    <li><a href="#motivation">- Motivation</a>
                    </li>
                    <li><a href="#goal">- Goal</a>
                    </li>
                    <li><a href="#userGuide">User Guide</a>
                    </li>
                    <li><a href="#barcodescanning">- Barcode Scanning</a>
                    </li>
                    <li><a href="#removingitems">- Removing Items</a>
                    </li>
                    <li><a href="#temperaturereading">- Temperature Reading</a>
                    </li>
                    <li><a href="#opendooralert">- Open Door Alert</a>
                    </li>
                    <li><a href="#stockcount">- Stock Count</a>
                    </li>
                    <li><a href="#technicalmanual">Technical Manual</a>
                    </li>
                    <li><a href="#webserver">- Web Server</a>
                    </li>
                    <li><a href="#interface">- Interface</a>
                    </li>
                    <li><a href="#finalprojectplan">Final Project Plan</a>
                    </li>
                    <li>
                        <a href="#pm">- Paul McGurk</a>
                    </li>
                    <li>
                        <a href="#dr">- Daniel Rafferty</a>
                    </li>
                    <li>
                        <a href="#amc">- Alex McBride</a>
                    </li>
                    <li>
                        <a href="#am">- Andrew Mortimer</a>
                    </li>
                    <li>
                        <a href="#sh">- Scott Henderson</a>
                    </li>
                    <li>
                        <a href="#"></a>
                    </li>
                </ul>
            </div>
        </nav>
    </div>
</header>
<main>
    <div class="row">
        <div class="col s12 m9 l10">
            <div class="card blue darken-2 white-text">
                <div class="container">
                    
                    <h4 class="logo" id="userGuide">Food waste Reduction with Intelligent Decisions Generating Energy Savings</h4>
                
                    <h4 class="logo section scrollspy" id="userGuide">Introduction</h4>
                    <h5 id="about" class="section scrollspy">About</h5>
                    <p>The project is to create a product using an Arduino and/or Raspberry Pi that will be a part of the Internet of Things. The Internet of Things is about taking everyday objects and embedding them with software, electronics and networking capabilities so that they can sense the environment around them and then send and receive data. The idea, after much thought and discussion will be to create a smart fridge. This idea will not only have a physical benefit to its application but also an environmental one, as from the start, the design is centred on trying to reduce food waste and energy consumption.</p>
                    <h5 id="motivation" class="section scrollspy">Motivation</h5>
                    <p>According to statistics from LoveFoodHateWaste (a website run by WRAP - Waste and Resources Action Programme) UK households throw away 7 million tonnes of food every year. One of the main reasons for this is not using the food before it goes out of date. The average cost per household of this food wastage is £470 per year. <br> Leaving the fridge door open for extended periods of time is a waste of electricity, not only can this quickly raise the temperature of the fridge but it is estimated by Home Energy Magazine, that about 7% of a fridge's energy consumption is caused by opening the door. The Institute of Food and Agricultural Sciences at the University of Florida has stated that opening the fridge door for extended periods of time, can lead to the wastage of anywhere from 50-120kWh a year, a substantial amount of energy. The average cost of a kWh in the UK is 15.5p (September 2015 tariffs). This means wasting the higher end of the benchmark, 120kWh, costs the household £18.60 a year (120kWh * 15.5p).</p>
                    <h5 id="goal" class="section scrollspy">Goal</h5>
                    <p>The goal of the fridge is to work in tandem with the user to help reduce food waste and electricity consumption. In order to do this, the fridge will keep track of each item of food the user owns. This information can be accessed remotely, so the user can check what items they have in stock. Therefore they will not buy additional items they already have, lessening the need to throw out excess unused food. Due to the individual user logins on the system, each user of the fridge has only their own items attached to their account. <br> To reduce electricity consumption, the temperature sensor will notify the user if they have left the fridge door open for too long. There is also a door sensor in case the user walks away and doesn't shut the door properly. In order to cool the fridge back to its normal operating temperature, the fridge will be required to use extra electricity it wouldn't have to use, if the door was open for less time.</p>
                </div>
            </div>
            <div class="card blue darken-2 white-text">
                <div class="container">
                    <h4 class="logo section scrollspy" id="userGuide">User Guide</h4>
                    <h5 id="barcodescanning" class="section scrollspy">Barcode Scanning</h5>
                    <p>When an item is placed in the fridge, the barcode can be scanned and its best-before date recorded. In order to do this, select the "Barcode Scanner" option using the touchscreen. Then hold the barcode up to the Pi Camera. This will scan the barcode and store it. Select the product if it appears in the product list that will be generated, otherwise it can be manually added to the database so that it will be remembered for next time. Once this is done, the best-before date can be entered. This means, the fridge will know when each item of food in the fridge will be nearing its best-before date, and will display the food that is going out of date soon on the home menu of the touchscreen. Please note that only products that Tesco Groceries sells will be able to be scanned. <br> <br> Step by Step Guide for Barcode Scanning <br><br> 1. If not already done so, log in to the fridge. Enable Pi camera on touchscreen interface, pick up camera and hold it up to barcode using the display on the touchscreen to aid you. <br> <br> 2. If successfully scanned, product information should appear on the screen, if not manually add this information. Add the best before date to the product. <br> <br> 3. Place product in fridge.</p>
                    <h5 id="removingitems" class="section scrollspy">Removing Items</h5>
                    <p>When removing an item from the fridge, find the product on the list and click the remove button. This product will then be removed from the list of products.
                    <h5 id="temperaturereading" class="section scrollspy">Temperature Reading</h5>
                    <p>The thermometer takes constant readings of the temperature inside the fridge. An LED will change colour based on the current temperature of the fridge. Blue indicates a normal (or lower) operating temperature. This will transition to green then red as the temperature rises above normal. This willl most likely be an indicator that the fridge door has been left open and the fridge will have to use more energy to bring the temperature back down to the normal operating temperature.</p>
                    <h5 id="opendooralert" class="section scrollspy">Open Door Status</h5>
                    <p>The status of the door (i.e. whether it is open or closed) is indicated on the page.</p>
                    <h5 id="stockcount" class="section scrollspy">Stock Count</h5>
                    <p>Select the "Stock" menu on the touchscreen to be given a display of what is currently in the fridge and how much of each item there is.</p>
                </div>
            </div>
            <div class="card blue darken-2 white-text">
                <div class="container">
                    <h4 class="logo section scrollspy" id="technicalmanual">Technical Manual</h4>
                    <h5 id="webserver" class="section scrollspy">Web Server</h5>
                    <p>We decided to use a Web-based approach for our interface. The Pi itself hosted the Web Server. This meant we only had to write the client application once, meaning it could be accessed from the touchscreen, a phone or desktop without client applications having to be written for each.</p>
                    <p>
                        We originally planned to serve the content using Flask, a Python web server. This would have given us the advantage of being able to run all of our Python components directly from the server, reducing overhead. We encountered great difficulties in getting this to work, and as a result reverted back to using Apache, with which we were more familiar. The end result is that we have PHP scripts that access and manipulate the database. We independently have a Python script running that dumps all the relevant information about the state of the system such as temperature, door open status, etc. into a JSON file. The client uses AJAX to periodically fetch this JSON file, which it then parses and is used to render/update the page.
                    </p>
                    <h5 id="interface" class="section scrollspy">Interface</h5>
                    <p>The interface for the touchscreen attached to the fridge was written in HTML, Javascript and CSS3. The interface consisted of a Home Screen which displayed the current temperature of the fridge and the items that are to expire soon. There is also an "Add Item" menu, which brings up the display from the barcode scanner, and a "Date Entry" menu. When an item is added via the interface, the back-end of the system updates the database to include the new item.</p>
                    <h5 id="barcodescanningTech" class="section scrollspy">Barcode Scanning</h5>
                    <p>The barcode scanner uses a camera which is attached to a Raspberry Pi. The camera scans for barcodes every fraction of a second. We used Zbar to recognize and parse barcodes in the images. Zbar had unfortunate performance problems, in that the built-in viewfinder only updated as fast as the barcode search worked - it was singly threaded. This meant that the limited performance available from the Pi only allowed the viewfinder to update at about 1-2 frames per second. This made it quite frustrating to try and scan barcodes, therefore a workaround had to be found. The first approach was to hide Zbar's viewfinder and start our compiled "ffplay" on another core to be the viewfinder. Unfortunately, the /dev/video0 device can only be opened by one program at a time. The solution to this was to compile a module called v4l2loopback, which can be used to create a virtual video device on /dev/video1 that can be opened multiple times. We compiled ffmpeg and used it to copy the video stream from /dev/video0 to /dev/video1. The result is that zbar and ffplay can both open the device, and the viewfinder can run at 30fps.</p>
                    <p> For the barcode lookup that maps barcodes to products, the plan was originally to use Outpan, which is a web service that provides an API for identifying products from their GTIN. However, Outpan didn't seem to recognise many products, so we decided to use TescoLabs instead. One disadvantage of this is that it limits us to using products sold from Tesco only, but for the purposes of the project this was not a problem. Using the Python code, a simple HTTP request could be made with the detected barcode and information on the current product would be returned.</p>
                    <h5 id="temperaturereading" class="section scrollspy">Temperature Reading</h5>
                    <p>In order to detect the temperature of the fridge, a Raspberry Pi was connected to a bread board which housed a range of devices. The most notable of these were the thermistor and an RGB LED. As a thermistor's resistance changes based on the current temperature, we set up the LED to change colour based on the current resistance of the thermistor. If the resistance is above the threshold temperature, the LED will turn red. Otherwise it will remain blue. The code to allow this to happen was written in Python, modified from a script written by Simon Monk for his "Raspberry Pi Starter Pack". The program worked by measuring the amount of time taken for a 300nF capacitor (using the variable resistance from the thermistor) to empty. The temperature of the fridge affected the resistance of the thermistor. The higher the temperature, the higher the resistance and the longer the capacitor takes to empty.</p>

                    <img src="img/tempsenproto.png" class="responsive-img">

                    <h5 id="opendooralertTech" class="section scrollspy">Open Door Alert</h5>
                    <p> We wanted a method of checking whether the door is opened or closed. We decided to attach a magnet to the door. A Hall effect sensor was used to check for the presence of the magnetic field. When the field is present, the sensor's output pin is pulled low, and the door is therefore closed. When the door is opened, the magnet attached to the door is moved away from the hall effect sensor mounted on the chassis, which causes the sensor's output pin to go high. </p>
                     <p>We used the RPi.GPIO library to access the GPIO pins on the pi. We connected the hall effect sensor's signal pin to GPIO 3, and used this pin to get the state of the door.</p>
                    <img src="img/hall_effect_schem.png" class="responsive-img">
                    <p>In order for the software on the Pi to access the hardware used, we utilised the RPi.GPIO library to allow access to the GPIO pins on the board.</p>
                </div>
            </div>
            <div class="card blue darken-2 white-text">
                <div class="container">
                    <h4 class="logo section scrollspy" id="finalprojectplan">Final Project Plan</h4>
                    <h5 id="pm" class="section scrollspy">Paul McGurk</h5>
                    <p>Paul's contribution</p>

                    <h5 id="dr" class="section scrollspy">Daniel Rafferty</h5>
                    <p>Current Progress & Group Organisation for initial Phase 1 Report submission.<br>
Set up web-server, first with Apache then Flask, before reverting back to Apache.<br>
Worked with Scott to:<br>
			- Set up MySQL and PHPMyAdmin for Databases.<br>
			- Created and maintained User and Products tables.<br>
			- Used JS, PHP and Python to populate database from user input.<br>
			- Worked on Motivation, Goals and User Guide for final website report.<br>
</p>
                    <h5 id="amc" class="section scrollspy">Alex McBride</h5>
                    <p>Alex's contribution</p>
                    <h5 id="am" class="section scrollspy">Andrew Mortimer</h5>
                    <p>Worked with Alex on the Hall effect sensor code in Python and integrated this onto the Pi. <br> Wrote a large portion of the final report.</p>
                    <h5 id="sh" class="section scrollspy">Scott Henderson</h5>
                    <p>Worked alongside Daniel to create and manage the database. <br> Retrieved and displayed the items on the touchscreen interface from the database in JavaScript. <br> Added the scanned products from TescoLabs to the database in Python using MySQL. <br> Added some sections and fleshed out parts of the report.</p>
                </div>
            </div>
        </div>
        <div class="col hide-on-small-only m3 l2">
            <ul class="section table-of-contents">
                <li class="blue-text text-darken-2">Table of Contents</li>
                <li><a href="#introduction">Introduction</a>
                </li>
                <li><a href="#about">- About</a>
                </li>
                <li><a href="#motivation">- Motivation</a>
                </li>
                <li><a href="#goal">- Goal</a>
                </li>
                <li><a href="#userGuide">User Guide</a>
                </li>
                <li><a href="#barcodescanning">- Barcode Scanning</a>
                </li>
                <li><a href="#removingitems">- Removing Items</a>
                </li>
                <li><a href="#temperaturereading">- Temperature Reading</a>
                </li>
                <li><a href="#opendooralert">- Open Door Alert</a>
                </li>
                <li><a href="#stockcount">- Stock Count</a>
                </li>
                <li><a href="#technicalmanual">Technical Manual</a>
                </li>
                <li><a href="#webserver">- Web Server</a>
                </li>
                <li><a href="#interface">- Interface</a>
                </li>
                <li><a href="#finalprojectplan">Final Project Plan</a>
                </li>
                <li>
                    <a href="#pm">- Paul McGurk</a>
                </li>
                <li>
                    <a href="#dr">- Daniel Rafferty</a>
                </li>
                <li>
                    <a href="#amc">- Alex McBride</a>
                </li>
                <li>
                    <a href="#am">- Andrew Mortimer</a>
                </li>
                <li>
                    <a href="#sh">- Scott Henderson</a>
                </li>
                <li>
                    <a href="#"></a>
                </li>
            </ul>
        </div>
    </div>
</main>
<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="js/materialize.min.js"></script>
<script src="js/js.js"></script>

</html>
